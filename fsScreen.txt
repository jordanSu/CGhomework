#version 330

// Default color buffer location is 0
// If you create framebuffer your own, you need to take care of it
layout(location=0) out vec4 outputColor;

in vec2 fTexcoord;	// Texture coordinate

//Uniforms
uniform float pixelMulti;
uniform float Zoom;
uniform float circleArea;
uniform vec2 mouseLoc;
uniform sampler2D uSampler;

void main()
{
    vec2 finalTexcoord;
    vec2 normalLoc = vec2(mouseLoc.x/800.0, mouseLoc.y/600.0);
	if (pow(gl_FragCoord.x-(mouseLoc.x*pixelMulti),2) + pow(gl_FragCoord.y-(mouseLoc.y*pixelMulti),2) <= circleArea)
        finalTexcoord = (fTexcoord-normalLoc) * (1.0/Zoom) + normalLoc;
    else
        finalTexcoord = fTexcoord;
    outputColor = texture(uSampler, finalTexcoord);
}
